apply plugin: 'java'
apply plugin: 'eclipse'

configurations {
    cucumberRuntime {
        extendsFrom testRuntime
    }
}

task cucumber() {
    dependsOn assemble, compileTestJava
        doLast {
            javaexec {
                main = "cucumber.api.cli.Main"
                    classpath = configurations.cucumberRuntime + sourceSets.main.output + sourceSets.test.output
                    args = ['--plugin', 'pretty', '--glue', 'gradle.cucumber', 'src/test/resources']
            }
        }
}

dependencies {
    testCompile 'info.cukes:cucumber-java:1.2.5+'
    testCompile 'info.cukes:cucumber-junit:1.2.5+'

    testCompile 'junit:junit:4.12+'

    testCompile 'org.mockito:mockito-all:1.10.19+'

    testCompile 'org.powermock:powermock-module-junit4:1.7.1+'
    testCompile 'org.powermock:powermock-api-mockito2:1.7.1+'

    testCompile 'org.assertj:assertj-core:3.8.0+'
}

task getDeps(type: Copy) {
    from sourceSets.main.runtimeClasspath
    into 'runtime/'
}

repositories {
    mavenCentral()
}
